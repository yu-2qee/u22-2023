@startuml
start
fork
:カードを挿入;
:取引を選択;

if (取引内容は？) then
  -->[引き出し] 
    :暗証番号を入力;
    if (暗証番号は正しいか？) then (はい)
      :金額を入力;
      :現金を出金;
      --> 次へ;
    else (いいえ)
      :エラーメッセージを表示;
      :カードを返却;
      stop
    endif

  elseif (預け入れ)
    :暗証番号を入力;
    if (暗証番号は正しいか？) then (はい)
      :現金を挿入;
      :金額を確認;
      :預け入れ完了;
      -> 次へ;
    else (いいえ)
      :エラーメッセージを表示;
      :カードを返却;
      stop
    endif

  else (残高照会)
    :暗証番号を入力;
    if (暗証番号は正しいか？) then (はい)
      :残高を表示;
      -->次へ;
    else (いいえ)
      :エラーメッセージを表示;
      :カードを返却;
      stop
    endif
endif

:明細を印刷しますか？;

if (印刷する？) then (はい)
  :明細を印刷;
else (いいえ)
  :印刷せず;
endif

:カードを取り出す;
stop
@enduml
